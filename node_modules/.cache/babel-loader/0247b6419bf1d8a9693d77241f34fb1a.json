{"remainingRequest":"/Users/user/workspace/pa_center_logistics/vue/node_modules/thread-loader/dist/cjs.js!/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js!/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/workspace/pa_center_logistics/vue/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/workspace/pa_center_logistics/vue/src/views/Login.vue","mtime":1580232537068},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYXhpb3NfcG9zdCB9IGZyb20gJy4uL2xpYi9heGlvcyc7CmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi9jb21wb25lbnRzL2xvZ2luL2RhdGFfcHJlc2VudGVycyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnbG9naW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7CiAgICByZXR1cm4gewogICAgICBsb2dpbjogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZXJyb3JfdGV4dDogJycsCiAgICAgIHBlbmRpbmc6IGZhbHNlLAogICAgICBlbnY6IGVudgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmVycm9yX3RleHQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuZXJyb3JfdGV4dDsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBtb2RlbDogZnVuY3Rpb24gbW9kZWwoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbG9naW46IHRoaXMubG9naW4sCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgfTsKICAgIH0sCiAgICBpc192YWxpZDogZnVuY3Rpb24gaXNfdmFsaWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvZ2luICYmIHRoaXMucGFzc3dvcmQgJiYgIXRoaXMucGVuZGluZzsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGF1dGg6IGZ1bmN0aW9uIGF1dGgoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pc192YWxpZCkgewogICAgICAgIHRoaXMudG9nZ2xlX3BlbmRpbmcoKTsKICAgICAgICBheGlvc19wb3N0KCcvbG9naW4nLCB0aGlzLm1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIG5ldyBBdXRoKCkubG9naW4ocmVzLmRhdGEsIF90aGlzLiRzdG9yZSk7CgogICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ2hvbWUnCiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXMudG9nZ2xlX3BlbmRpbmcoKTsKCiAgICAgICAgICBfdGhpcy5lcnJvcl90ZXh0ID0gZS5yZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3JfdGV4dCA9ICfQktCy0LXQtNC40YLQtSDQu9C+0LPQuNC9L9C/0LDRgNC+0LvRjCc7CiAgICAgIH0KICAgIH0sCiAgICB0b2dnbGVfcGVuZGluZzogZnVuY3Rpb24gdG9nZ2xlX3BlbmRpbmcoKSB7CiAgICAgIHRoaXMucGVuZGluZyA9ICF0aGlzLnBlbmRpbmc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,SAAA,UAAA,QAAA,cAAA;AACA,SAAA,IAAA,QAAA,qCAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAGA,EAAA,IAHA,kBAGA;AACA,QAAA,GAAA,GAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,KAJA;AAKA,MAAA,GAAA,EAAA;AALA,KAAA;AAOA,GAZA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,UAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA;AACA,GAhBA;AAkBA,EAAA,QAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,aAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,KANA;AAQA,IAAA,QARA,sBAQA;AACA,aAAA,KAAA,KAAA,IAAA,KAAA,QAAA,IAAA,CAAA,KAAA,OAAA;AACA;AAVA,GAlBA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AAAA;;AACA,UAAA,KAAA,QAAA,EAAA;AACA,aAAA,cAAA;AACA,QAAA,UAAA,CAAA,QAAA,EAAA,KAAA,KAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,cAAA,IAAA,GAAA,KAAA,CAAA,GAAA,CAAA,IAAA,EAAA,KAAA,CAAA,MAAA;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,SAJA,EAKA,KALA,CAKA,UAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,cAAA;;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,CAAA,CAAA,QAAA,CAAA,IAAA;AACA,SARA;AASA,OAXA,MAWA;AACA,aAAA,UAAA,GAAA,sBAAA;AACA;AACA,KAhBA;AAkBA,IAAA,cAlBA,4BAkBA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA;AApBA;AA/BA,CAAA","sourcesContent":["<template>\n  <div class=\"d-flex flex-column mt-xxxl align-items-center\">\n    <div class=\"d-flex flex-column\">\n      <div class=\"mb-3 align-self-center\">\n        <h3 class=\"bold\">Личный кабинет клиента</h3>\n      </div>\n      <div>\n        <div class=\"font-weight-bold mb-default\">\n          <h5>Авторизация</h5>\n        </div>\n        <div class=\"mb-default\">Для входа используйте предоставленный логин и пароль</div>\n        <b-alert dismissible :show=\"Boolean(error_text)\" variant=\"danger\" @dismissed=\"error_text = ''\">{{ error_text }}</b-alert>\n        <div class=\"form-group\">\n          <input v-model=\"login\" class=\"mb-default form-control\" placeholder=\"Логин\"/>\n        </div>\n        <div class=\"form-group\">\n          <input type=\"password\" v-model=\"password\" class=\"mb-default form-control\" placeholder=\"Пароль\"/>\n        </div>\n        <b-button squared class=\"d-block w-100 mb-default\" variant=\"danger\" @click=\"auth\">\n          <span v-if=\"!pending\">Войти в кабинет</span>\n          <b-spinner v-else small></b-spinner>\n        </b-button>\n        <router-link :to=\"{ name: 'registration' }\" class=\"btn btn-secondary rounded-0 d-block w-100\" tag=\"button\">Получить логин и пароль</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios_post } from '../lib/axios'\nimport { Auth } from '../components/login/data_presenters'\nexport default {\n  name: 'login',\n\n  data () {\n    const env = process.env.NODE_ENV\n    return {\n      login: '',\n      password: '',\n      error_text: '',\n      pending: false,\n      env\n    }\n  },\n\n  created () {\n    this.error_text = this.$route.params.error_text\n  },\n\n  computed: {\n    model () {\n      return {\n        login: this.login,\n        password: this.password\n      }\n    },\n\n    is_valid () {\n      return this.login && this.password && !this.pending\n    }\n  },\n\n  methods: {\n    auth () {\n      if (this.is_valid) {\n        this.toggle_pending()\n        axios_post('/login', this.model)\n          .then(res => {\n            new Auth().login(res.data, this.$store)\n            this.$router.push({ name: 'home' })\n          })\n          .catch((e) => {\n            this.toggle_pending()\n            this.error_text = e.response.data\n          })\n      } else {\n        this.error_text = 'Введите логин/пароль'\n      }\n    },\n\n    toggle_pending () {\n      this.pending = !this.pending\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views"}]}