{"remainingRequest":"/Users/user/workspace/pa_center_logistics/vue/node_modules/thread-loader/dist/cjs.js!/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js!/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/workspace/pa_center_logistics/vue/src/components/product/ProductAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/workspace/pa_center_logistics/vue/src/components/product/ProductAdd.vue","mtime":1584781097190},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgQWpheE9wZXJhdG9yIH0gZnJvbSAnLi4vLi4vbGliL2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwcm9kdWN0LWFkZCcsCiAgcHJvcHM6IHsKICAgIG1vZGFsX3Nob3c6IEJvb2xlYW4KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwZW5kaW5nOiBmYWxzZSwKICAgICAgY3VycmVudF9wYWdlOiAxLAogICAgICBkYXRhOiBbXSwKICAgICAgdG90YWxfcm93czogMCwKICAgICAgcGVyX3BhZ2U6IDIwLAogICAgICBmaWVsZHM6IFt7CiAgICAgICAga2V5OiAnbmFtZScsCiAgICAgICAgbGFiZWw6ICfQndCw0LfQstCw0L3QuNC1JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAga2V5OiAndmVuZG9yX2NvZGUnLAogICAgICAgIGxhYmVsOiAn0JDRgNGC0LjQutGD0LsnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdiYXJjb2RlJywKICAgICAgICBsYWJlbDogJ9Co0YLRgNC40YUt0LrQvtC0JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAga2V5OiAnYWRkJywKICAgICAgICBsYWJlbDogJycsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfV0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRfcHJvZHVjdHNfbGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0X3Byb2R1Y3RzX2xpc3Q6IGZ1bmN0aW9uIGdldF9wcm9kdWN0c19saXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHBhZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDE7CiAgICAgIHRoaXMudG9nZ2xlX3BlbmRpbmcoKTsKICAgICAgbmV3IEFqYXhPcGVyYXRvcigncHJvZHVjdHNfbGlzdCcsIHRoaXMuJHN0b3JlLCAncHJvZHVjdHMnKS5nZXQoewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGFnZTogcGFnZSwKICAgICAgICAgIGxpbWl0OiB0aGlzLnBlcl9wYWdlCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMuZGF0YSA9IFtdOwogICAgICAgIF90aGlzLmRhdGEgPSBkYXRhLnJlc3VsdDsKICAgICAgICBfdGhpcy50b3RhbF9yb3dzID0gZGF0YS50b3RhbDsKCiAgICAgICAgX3RoaXMudG9nZ2xlX3BlbmRpbmcoKTsKCiAgICAgICAgcmV0dXJuIF90aGlzLmRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMudG9nZ2xlX3BlbmRpbmcoKTsKCiAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnbG9naW4nLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGVycm9yX3RleHQ6ICfQktC+0LnQtNGC0LjRgtC1INCyINC70LjRh9C90YvQuSDQutCw0LHQuNC90LXRgicKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlX3BlbmRpbmc6IGZ1bmN0aW9uIHRvZ2dsZV9wZW5kaW5nKCkgewogICAgICB0aGlzLnBlbmRpbmcgPSAhdGhpcy5wZW5kaW5nOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ProductAdd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,SAAA,YAAA,QAAA,iBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,YAAA,EAAA,CAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,UAAA,EAAA,CAJA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA,MAAA,MAAA,EAAA,CAAA;AACA,QAAA,GAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA,UAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAAA,EAKA;AACA,QAAA,GAAA,EAAA,aADA;AAEA,QAAA,KAAA,EAAA,SAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OALA,EAUA;AACA,QAAA,GAAA,EAAA,SADA;AAEA,QAAA,KAAA,EAAA,WAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAVA,EAeA;AACA,QAAA,GAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAfA;AANA,KAAA;AA2BA,GAlCA;AAoCA,EAAA,OApCA,qBAoCA;AACA,SAAA,iBAAA;AACA,GAtCA;AAwCA,EAAA,OAAA,EAAA;AACA,IAAA,iBADA,+BACA;AAAA;;AAAA,UAAA,IAAA,uEAAA,CAAA;AACA,WAAA,cAAA;AACA,UAAA,YAAA,CAAA,eAAA,EAAA,KAAA,MAAA,EAAA,UAAA,EAAA,GAAA,CAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,KAAA,EAAA,KAAA;AAFA;AADA,OAAA,EAMA,IANA,CAMA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,IAAA,CAAA,KAAA;;AACA,QAAA,KAAA,CAAA,cAAA;;AACA,eAAA,KAAA,CAAA,IAAA;AACA,OAZA,EAaA,KAbA,CAaA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,cAAA;;AACA,YAAA,CAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA,OAAA;AAAA,UAAA,MAAA,EAAA;AAAA,YAAA,UAAA,EAAA;AAAA;AAAA,SAAA;AACA,OAhBA;AAiBA,KApBA;AAsBA,IAAA,cAtBA,4BAsBA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA;AAxBA;AAxCA,CAAA","sourcesContent":["<template>\n  <b-modal :visible=\"modal_show\" size=\"lg\" @change=\"$emit('change', false)\" title=\"Мои товары\" centered no-close-on-backdrop hide-footer>\n    <b-input placeholder=\"Поиск по названию, артикулу, штрихкоду\" class=\"product_add__input_filter\"></b-input>\n    <b-table id=\"application_log_appointment_table\" hover small :busy=\"pending\"\n           style=\"border: 2px solid white; font-size: 13px; line-height: 16px\"\n           :items=\"data\"\n           :fields=\"fields\"\n           :current-page=\"current_page\">\n      <template v-slot:table-busy>\n        <div class=\"text-center text-danger my-2\">\n          <b-spinner class=\"align-middle\"></b-spinner>\n          <strong>Загрузка...</strong>\n        </div>\n      </template>\n      <template v-slot:cell(add)=\"data\">\n        <a class=\"btn btn-link no-padding btn-sm\" @click=\"$emit('add', data.item)\">Добавить</a>\n      </template>\n    </b-table>\n    <b-pagination v-model=\"current_page\"\n                  :total-rows=\"total_rows\"\n                  :per-page=\"per_page\"\n                  @change=\"get_products_list\"\n                  aria-controls=\"application_log_table\"></b-pagination>\n  </b-modal>\n</template>\n\n<script>\nimport { AjaxOperator } from '../../lib/axios'\n\nexport default {\n  name: 'product-add',\n  props: {\n    modal_show: Boolean\n  },\n\n  data () {\n    return {\n      pending: false,\n      current_page: 1,\n      data: [],\n      total_rows: 0,\n      per_page: 20,\n      fields: [{\n        key: 'name',\n        label: 'Название',\n        sortable: true\n      },\n      {\n        key: 'vendor_code',\n        label: 'Артикул',\n        sortable: true\n      },\n      {\n        key: 'barcode',\n        label: 'Штрих-код',\n        sortable: true\n      },\n      {\n        key: 'add',\n        label: '',\n        sortable: true\n      }]\n    }\n  },\n\n  created () {\n    this.get_products_list()\n  },\n\n  methods: {\n    get_products_list (page = 1) {\n      this.toggle_pending()\n      new AjaxOperator('products_list', this.$store, 'products').get({\n        params: {\n          page,\n          limit: this.per_page\n        }\n      })\n        .then(data => {\n          this.data = []\n          this.data = data.result\n          this.total_rows = data.total\n          this.toggle_pending()\n          return this.data\n        })\n        .catch(e => {\n          this.toggle_pending()\n          if (e.response.status === 404) this.$router.push({ name: 'login', params: { error_text: 'Войдтите в личный кабинет' } })\n        })\n    },\n\n    toggle_pending () {\n      this.pending = !this.pending\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/product"}]}