{"remainingRequest":"/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js!/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/workspace/pa_center_logistics/vue/src/components/consignees/ConsigneesList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/workspace/pa_center_logistics/vue/src/components/consignees/ConsigneesList.vue","mtime":1585147880360},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFBhZ2VIZWFkZXIgZnJvbSAnLi4vY29tbW9uL1BhZ2VIZWFkZXInOwppbXBvcnQgeyBBamF4T3BlcmF0b3IgfSBmcm9tICcuLi8uLi9saWIvYXhpb3MnOwppbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjb25zaWduZWVzLWxpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2VIZWFkZXI6IFBhZ2VIZWFkZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwZW5kaW5nOiBmYWxzZSwKICAgICAgY3VycmVudF9wYWdlOiAxLAogICAgICBkYXRhOiBbXSwKICAgICAgdG90YWxfcm93czogMCwKICAgICAgcGVyX3BhZ2U6IDIwLAogICAgICBmaWVsZHM6IFt7CiAgICAgICAga2V5OiAnaWQnLAogICAgICAgIGxhYmVsOiAnSUQnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdjb25zaWduZWVfbmFtZScsCiAgICAgICAgbGFiZWw6ICfQndCw0LfQstCw0L3QuNC1JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAga2V5OiAnY29uc2lnbmVlX2FkZHJlc3MnLAogICAgICAgIGxhYmVsOiAn0JDQtNGA0LXRgdGBJywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9XSwKICAgICAgdGFibGVfc29ydGluZzogewogICAgICAgIHNvcnRfYnk6ICdjb25zaWduZWVfbmFtZScsCiAgICAgICAgc29ydF9kZXNjOiB0cnVlCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRfY29uc2lnbmVlc19saXN0KCk7CiAgfSwKICB3YXRjaDogewogICAgdGFibGVfc29ydGluZzogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld190YWJsZV9zb3J0aW5nKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBoYW5kbGVyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRlYm91bmNlKGZ1bmN0aW9uIF9jYWxsZWUobmV3X3RhYmxlX3NvcnRpbmcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3X3RhYmxlX3NvcnRpbmcuc29ydF9ieSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlX3BlbmRpbmcoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQWpheE9wZXJhdG9yKCcvY29uc2lnbmVlc19saXN0JywgX3RoaXMuJHN0b3JlLCAnY29uc2lnbmVlcycpLmdldCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IF90aGlzLmN1cnJlbnRfcGFnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogX3RoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydF9ieTogbmV3X3RhYmxlX3NvcnRpbmcuc29ydF9ieSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0X2Rlc2M6IG5ld190YWJsZV9zb3J0aW5nLnNvcnRfZGVzYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGEgPSBkYXRhLnJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudG90YWxfcm93cyA9IGRhdGEudG90YWw7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50b2dnbGVfcGVuZGluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDUwMCkobmV3X3RhYmxlX3NvcnRpbmcpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZV9wZW5kaW5nOiBmdW5jdGlvbiB0b2dnbGVfcGVuZGluZygpIHsKICAgICAgdGhpcy5wZW5kaW5nID0gIXRoaXMucGVuZGluZzsKICAgIH0sCiAgICBnZXRfY29uc2lnbmVlc19saXN0OiBmdW5jdGlvbiBnZXRfY29uc2lnbmVlc19saXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBwYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxOwogICAgICB0aGlzLnRvZ2dsZV9wZW5kaW5nKCk7CiAgICAgIG5ldyBBamF4T3BlcmF0b3IoIi9jb25zaWduZWVzX2xpc3QiLCB0aGlzLiRzdG9yZSwgJ2NvbnNpZ25lZXMnKS5nZXQoewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGFnZTogcGFnZSwKICAgICAgICAgIGxpbWl0OiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgc29ydF9ieTogdGhpcy50YWJsZV9zb3J0aW5nLnNvcnRfYnksCiAgICAgICAgICBzb3J0X2Rlc2M6IHRoaXMudGFibGVfc29ydGluZy5zb3J0X2Rlc2MKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpczIuZGF0YSA9IFtdOwogICAgICAgIF90aGlzMi5kYXRhID0gZGF0YS5yZXN1bHQ7CiAgICAgICAgX3RoaXMyLnRvdGFsX3Jvd3MgPSBkYXRhLnRvdGFsOwoKICAgICAgICBfdGhpczIudG9nZ2xlX3BlbmRpbmcoKTsKCiAgICAgICAgcmV0dXJuIF90aGlzMi5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMi50b2dnbGVfcGVuZGluZygpOwoKICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnbG9naW4nLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGVycm9yX3RleHQ6ICfQktC+0LnQtNGC0LjRgtC1INCyINC70LjRh9C90YvQuSDQutCw0LHQuNC90LXRgicKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ConsigneesList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div>\n    <page-header title=\"Список грузополучателей\"></page-header>\n    <b-table id=\"products_list\" hover small no-local-sorting\n             :busy=\"pending\"\n             :items=\"data\"\n             :fields=\"fields\"\n             :sort-by.sync=\"table_sorting.sort_by\"\n             :sort-desc.sync=\"table_sorting.sort_desc\"\n             :current-page=\"current_page\">\n      <template v-slot:table-busy>\n        <div class=\"text-center text-danger my-2\">\n          <b-spinner class=\"align-middle\"></b-spinner>\n          <strong>Загрузка...</strong>\n        </div>\n      </template>\n    </b-table>\n    <b-pagination v-model=\"current_page\"\n                :total-rows=\"total_rows\"\n                :per-page=\"per_page\"\n                @change=\"get_consignees_list\"\n                aria-controls=\"products_list\"></b-pagination>\n  </div>\n  </div>\n</template>\n\n<script>\nimport PageHeader from '../common/PageHeader'\nimport { AjaxOperator } from '../../lib/axios'\nimport debounce from 'lodash.debounce'\nexport default {\n  name: 'consignees-list',\n  components: { PageHeader },\n  data () {\n    return {\n      pending: false,\n      current_page: 1,\n      data: [],\n      total_rows: 0,\n      per_page: 20,\n      fields: [{\n        key: 'id',\n        label: 'ID',\n        sortable: true\n      },\n      {\n        key: 'consignee_name',\n        label: 'Название',\n        sortable: true\n      },\n      {\n        key: 'consignee_address',\n        label: 'Адресс',\n        sortable: true\n      }],\n      table_sorting: {\n        sort_by: 'consignee_name',\n        sort_desc: true\n      }\n    }\n  },\n\n  created () {\n    this.get_consignees_list()\n  },\n\n  watch: {\n    table_sorting: {\n      handler: async function (new_table_sorting) {\n        debounce(async (new_table_sorting) => {\n          if (new_table_sorting.sort_by) {\n            this.toggle_pending()\n            new AjaxOperator('/consignees_list', this.$store, 'consignees').get({\n              params: {\n                page: this.current_page,\n                limit: this.per_page,\n                sort_by: new_table_sorting.sort_by,\n                sort_desc: new_table_sorting.sort_desc\n              }\n            })\n              .then(data => {\n                this.data = data.result\n                this.total_rows = data.total\n                this.toggle_pending()\n              })\n          }\n        }, 500)(new_table_sorting)\n      },\n      deep: true\n    }\n  },\n\n  methods: {\n    toggle_pending () {\n      this.pending = !this.pending\n    },\n\n    get_consignees_list (page = 1) {\n      this.toggle_pending()\n      new AjaxOperator(`/consignees_list`, this.$store, 'consignees').get({\n        params: {\n          page,\n          limit: this.per_page,\n          sort_by: this.table_sorting.sort_by,\n          sort_desc: this.table_sorting.sort_desc\n        }\n      })\n        .then(data => {\n          this.data = []\n          this.data = data.result\n          this.total_rows = data.total\n          this.toggle_pending()\n          return this.data\n        })\n        .catch(e => {\n          this.toggle_pending()\n          if (e.response.status === 404) this.$router.push({ name: 'login', params: { error_text: 'Войдтите в личный кабинет' } })\n        })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/consignees"}]}