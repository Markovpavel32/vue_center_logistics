{"remainingRequest":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/workspace/pa_center_logistics/vue/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/workspace/pa_center_logistics/vue/src/views/Login.vue","mtime":1580232537068},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGF4aW9zX3Bvc3QgfSBmcm9tICcuLi9saWIvYXhpb3MnCmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi9jb21wb25lbnRzL2xvZ2luL2RhdGFfcHJlc2VudGVycycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsb2dpbicsCgogIGRhdGEgKCkgewogICAgY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYKICAgIHJldHVybiB7CiAgICAgIGxvZ2luOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBlcnJvcl90ZXh0OiAnJywKICAgICAgcGVuZGluZzogZmFsc2UsCiAgICAgIGVudgogICAgfQogIH0sCgogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5lcnJvcl90ZXh0ID0gdGhpcy4kcm91dGUucGFyYW1zLmVycm9yX3RleHQKICB9LAoKICBjb21wdXRlZDogewogICAgbW9kZWwgKCkgewogICAgICByZXR1cm4gewogICAgICAgIGxvZ2luOiB0aGlzLmxvZ2luLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgIH0KICAgIH0sCgogICAgaXNfdmFsaWQgKCkgewogICAgICByZXR1cm4gdGhpcy5sb2dpbiAmJiB0aGlzLnBhc3N3b3JkICYmICF0aGlzLnBlbmRpbmcKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBhdXRoICgpIHsKICAgICAgaWYgKHRoaXMuaXNfdmFsaWQpIHsKICAgICAgICB0aGlzLnRvZ2dsZV9wZW5kaW5nKCkKICAgICAgICBheGlvc19wb3N0KCcvbG9naW4nLCB0aGlzLm1vZGVsKQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgbmV3IEF1dGgoKS5sb2dpbihyZXMuZGF0YSwgdGhpcy4kc3RvcmUpCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2hvbWUnIH0pCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIHRoaXMudG9nZ2xlX3BlbmRpbmcoKQogICAgICAgICAgICB0aGlzLmVycm9yX3RleHQgPSBlLnJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvcl90ZXh0ID0gJ9CS0LLQtdC00LjRgtC1INC70L7Qs9C40L0v0L/QsNGA0L7Qu9GMJwogICAgICB9CiAgICB9LAoKICAgIHRvZ2dsZV9wZW5kaW5nICgpIHsKICAgICAgdGhpcy5wZW5kaW5nID0gIXRoaXMucGVuZGluZwogICAgfQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"d-flex flex-column mt-xxxl align-items-center\">\n    <div class=\"d-flex flex-column\">\n      <div class=\"mb-3 align-self-center\">\n        <h3 class=\"bold\">Личный кабинет клиента</h3>\n      </div>\n      <div>\n        <div class=\"font-weight-bold mb-default\">\n          <h5>Авторизация</h5>\n        </div>\n        <div class=\"mb-default\">Для входа используйте предоставленный логин и пароль</div>\n        <b-alert dismissible :show=\"Boolean(error_text)\" variant=\"danger\" @dismissed=\"error_text = ''\">{{ error_text }}</b-alert>\n        <div class=\"form-group\">\n          <input v-model=\"login\" class=\"mb-default form-control\" placeholder=\"Логин\"/>\n        </div>\n        <div class=\"form-group\">\n          <input type=\"password\" v-model=\"password\" class=\"mb-default form-control\" placeholder=\"Пароль\"/>\n        </div>\n        <b-button squared class=\"d-block w-100 mb-default\" variant=\"danger\" @click=\"auth\">\n          <span v-if=\"!pending\">Войти в кабинет</span>\n          <b-spinner v-else small></b-spinner>\n        </b-button>\n        <router-link :to=\"{ name: 'registration' }\" class=\"btn btn-secondary rounded-0 d-block w-100\" tag=\"button\">Получить логин и пароль</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios_post } from '../lib/axios'\nimport { Auth } from '../components/login/data_presenters'\nexport default {\n  name: 'login',\n\n  data () {\n    const env = process.env.NODE_ENV\n    return {\n      login: '',\n      password: '',\n      error_text: '',\n      pending: false,\n      env\n    }\n  },\n\n  created () {\n    this.error_text = this.$route.params.error_text\n  },\n\n  computed: {\n    model () {\n      return {\n        login: this.login,\n        password: this.password\n      }\n    },\n\n    is_valid () {\n      return this.login && this.password && !this.pending\n    }\n  },\n\n  methods: {\n    auth () {\n      if (this.is_valid) {\n        this.toggle_pending()\n        axios_post('/login', this.model)\n          .then(res => {\n            new Auth().login(res.data, this.$store)\n            this.$router.push({ name: 'home' })\n          })\n          .catch((e) => {\n            this.toggle_pending()\n            this.error_text = e.response.data\n          })\n      } else {\n        this.error_text = 'Введите логин/пароль'\n      }\n    },\n\n    toggle_pending () {\n      this.pending = !this.pending\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}