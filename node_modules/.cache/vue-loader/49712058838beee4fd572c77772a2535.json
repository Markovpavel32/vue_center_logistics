{"remainingRequest":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/workspace/pa_center_logistics/vue/src/components/product/ProductAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/workspace/pa_center_logistics/vue/src/components/product/ProductAdd.vue","mtime":1584781097190},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFqYXhPcGVyYXRvciB9IGZyb20gJy4uLy4uL2xpYi9heGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdC1hZGQnLAogIHByb3BzOiB7CiAgICBtb2RhbF9zaG93OiBCb29sZWFuCiAgfSwKCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBwZW5kaW5nOiBmYWxzZSwKICAgICAgY3VycmVudF9wYWdlOiAxLAogICAgICBkYXRhOiBbXSwKICAgICAgdG90YWxfcm93czogMCwKICAgICAgcGVyX3BhZ2U6IDIwLAogICAgICBmaWVsZHM6IFt7CiAgICAgICAga2V5OiAnbmFtZScsCiAgICAgICAgbGFiZWw6ICfQndCw0LfQstCw0L3QuNC1JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAndmVuZG9yX2NvZGUnLAogICAgICAgIGxhYmVsOiAn0JDRgNGC0LjQutGD0LsnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdiYXJjb2RlJywKICAgICAgICBsYWJlbDogJ9Co0YLRgNC40YUt0LrQvtC0JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAnYWRkJywKICAgICAgICBsYWJlbDogJycsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfV0KICAgIH0KICB9LAoKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0X3Byb2R1Y3RzX2xpc3QoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGdldF9wcm9kdWN0c19saXN0IChwYWdlID0gMSkgewogICAgICB0aGlzLnRvZ2dsZV9wZW5kaW5nKCkKICAgICAgbmV3IEFqYXhPcGVyYXRvcigncHJvZHVjdHNfbGlzdCcsIHRoaXMuJHN0b3JlLCAncHJvZHVjdHMnKS5nZXQoewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGFnZSwKICAgICAgICAgIGxpbWl0OiB0aGlzLnBlcl9wYWdlCiAgICAgICAgfQogICAgICB9KQogICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgdGhpcy5kYXRhID0gW10KICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGEucmVzdWx0CiAgICAgICAgICB0aGlzLnRvdGFsX3Jvd3MgPSBkYXRhLnRvdGFsCiAgICAgICAgICB0aGlzLnRvZ2dsZV9wZW5kaW5nKCkKICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIHRoaXMudG9nZ2xlX3BlbmRpbmcoKQogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2xvZ2luJywgcGFyYW1zOiB7IGVycm9yX3RleHQ6ICfQktC+0LnQtNGC0LjRgtC1INCyINC70LjRh9C90YvQuSDQutCw0LHQuNC90LXRgicgfSB9KQogICAgICAgIH0pCiAgICB9LAoKICAgIHRvZ2dsZV9wZW5kaW5nICgpIHsKICAgICAgdGhpcy5wZW5kaW5nID0gIXRoaXMucGVuZGluZwogICAgfQogIH0KfQo="},{"version":3,"sources":["ProductAdd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ProductAdd.vue","sourceRoot":"src/components/product","sourcesContent":["<template>\n  <b-modal :visible=\"modal_show\" size=\"lg\" @change=\"$emit('change', false)\" title=\"Мои товары\" centered no-close-on-backdrop hide-footer>\n    <b-input placeholder=\"Поиск по названию, артикулу, штрихкоду\" class=\"product_add__input_filter\"></b-input>\n    <b-table id=\"application_log_appointment_table\" hover small :busy=\"pending\"\n           style=\"border: 2px solid white; font-size: 13px; line-height: 16px\"\n           :items=\"data\"\n           :fields=\"fields\"\n           :current-page=\"current_page\">\n      <template v-slot:table-busy>\n        <div class=\"text-center text-danger my-2\">\n          <b-spinner class=\"align-middle\"></b-spinner>\n          <strong>Загрузка...</strong>\n        </div>\n      </template>\n      <template v-slot:cell(add)=\"data\">\n        <a class=\"btn btn-link no-padding btn-sm\" @click=\"$emit('add', data.item)\">Добавить</a>\n      </template>\n    </b-table>\n    <b-pagination v-model=\"current_page\"\n                  :total-rows=\"total_rows\"\n                  :per-page=\"per_page\"\n                  @change=\"get_products_list\"\n                  aria-controls=\"application_log_table\"></b-pagination>\n  </b-modal>\n</template>\n\n<script>\nimport { AjaxOperator } from '../../lib/axios'\n\nexport default {\n  name: 'product-add',\n  props: {\n    modal_show: Boolean\n  },\n\n  data () {\n    return {\n      pending: false,\n      current_page: 1,\n      data: [],\n      total_rows: 0,\n      per_page: 20,\n      fields: [{\n        key: 'name',\n        label: 'Название',\n        sortable: true\n      },\n      {\n        key: 'vendor_code',\n        label: 'Артикул',\n        sortable: true\n      },\n      {\n        key: 'barcode',\n        label: 'Штрих-код',\n        sortable: true\n      },\n      {\n        key: 'add',\n        label: '',\n        sortable: true\n      }]\n    }\n  },\n\n  created () {\n    this.get_products_list()\n  },\n\n  methods: {\n    get_products_list (page = 1) {\n      this.toggle_pending()\n      new AjaxOperator('products_list', this.$store, 'products').get({\n        params: {\n          page,\n          limit: this.per_page\n        }\n      })\n        .then(data => {\n          this.data = []\n          this.data = data.result\n          this.total_rows = data.total\n          this.toggle_pending()\n          return this.data\n        })\n        .catch(e => {\n          this.toggle_pending()\n          if (e.response.status === 404) this.$router.push({ name: 'login', params: { error_text: 'Войдтите в личный кабинет' } })\n        })\n    },\n\n    toggle_pending () {\n      this.pending = !this.pending\n    }\n  }\n}\n</script>\n"]}]}