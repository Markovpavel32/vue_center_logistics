{"remainingRequest":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/workspace/pa_center_logistics/vue/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/workspace/pa_center_logistics/vue/src/views/Login.vue","mtime":1579463178692},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/workspace/pa_center_logistics/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGF4aW9zX3Bvc3QgfSBmcm9tICcuLi9saWIvYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2xvZ2luJywKCiAgZGF0YSAoKSB7CiAgICBjb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVgogICAgcmV0dXJuIHsKICAgICAgbG9naW46ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIGVycm9yX3RleHQ6ICcnLAogICAgICBwZW5kaW5nOiBmYWxzZSwKICAgICAgZW52CiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIG1vZGVsICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBsb2dpbjogdGhpcy5sb2dpbiwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICB9CiAgICB9LAoKICAgIGlzX3ZhbGlkICgpIHsKICAgICAgcmV0dXJuIHRoaXMubG9naW4gJiYgdGhpcy5wYXNzd29yZCAmJiAhdGhpcy5wZW5kaW5nCiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgYXV0aCAoKSB7CiAgICAgIGlmICh0aGlzLmlzX3ZhbGlkKSB7CiAgICAgICAgdGhpcy50b2dnbGVfcGVuZGluZygpCiAgICAgICAgYXhpb3NfcG9zdCgnL2xvZ2luJywgdGhpcy5tb2RlbCkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy50b2dnbGVfcGVuZGluZygpCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2hvbWUnIH0pCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIHRoaXMudG9nZ2xlX3BlbmRpbmcoKQogICAgICAgICAgICB0aGlzLmVycm9yX3RleHQgPSBlLnJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvcl90ZXh0ID0gJ9CS0LLQtdC00LjRgtC1INC70L7Qs9C40L0v0L/QsNGA0L7Qu9GMJwogICAgICB9CiAgICB9LAoKICAgIHRvZ2dsZV9wZW5kaW5nICgpIHsKICAgICAgdGhpcy5wZW5kaW5nID0gIXRoaXMucGVuZGluZwogICAgfQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"d-flex flex-column mt-xxxl align-items-center\">\n    <div class=\"d-flex flex-column\">\n      <div class=\"mb-3 align-self-center\">\n        <h3 class=\"bold\">Личный кабинет клиента</h3>\n      </div>\n      <div>\n        <div class=\"font-weight-bold mb-default\">\n          <h5>Авторизация</h5>\n        </div>\n        <div class=\"mb-default\">Для входа используйте предоставленный логин и пароль</div>\n        <b-alert dismissible :show=\"Boolean(error_text)\" variant=\"danger\" @dismissed=\"error_text = ''\">{{ error_text }}</b-alert>\n        <div class=\"form-group\">\n          <input v-model=\"login\" class=\"mb-default form-control\" placeholder=\"Логин\"/>\n        </div>\n        <div class=\"form-group\">\n          <input type=\"password\" v-model=\"password\" class=\"mb-default form-control\" placeholder=\"Пароль\"/>\n        </div>\n        <b-button squared class=\"d-block w-100 mb-default\" variant=\"danger\" @click=\"auth\">\n          <span v-if=\"!pending\">Войти в кабинет</span>\n          <b-spinner v-else small></b-spinner>\n        </b-button>\n        <router-link :to=\"{ name: 'registration' }\" class=\"btn btn-secondary rounded-0 d-block w-100\" tag=\"button\">Получить логин и пароль</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios_post } from '../lib/axios'\n\nexport default {\n  name: 'login',\n\n  data () {\n    const env = process.env.NODE_ENV\n    return {\n      login: '',\n      password: '',\n      error_text: '',\n      pending: false,\n      env\n    }\n  },\n\n  computed: {\n    model () {\n      return {\n        login: this.login,\n        password: this.password\n      }\n    },\n\n    is_valid () {\n      return this.login && this.password && !this.pending\n    }\n  },\n\n  methods: {\n    auth () {\n      if (this.is_valid) {\n        this.toggle_pending()\n        axios_post('/login', this.model)\n          .then(() => {\n            this.toggle_pending()\n            this.$router.push({ name: 'home' })\n          })\n          .catch((e) => {\n            this.toggle_pending()\n            this.error_text = e.response.data\n          })\n      } else {\n        this.error_text = 'Введите логин/пароль'\n      }\n    },\n\n    toggle_pending () {\n      this.pending = !this.pending\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}